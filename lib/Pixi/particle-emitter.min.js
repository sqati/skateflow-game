import*as PIXI from"./pixi-legacy.min.js";class PropertyNode{constructor(e,t,i){this.value=e,this.time=t,this.next=null,this.isStepped=!1,this.ease=i?"function"==typeof i?i:generateEase(i):null}static createList(e){if("list"in e){const t=e.list;let a;const{value:n,time:r}=t[0],o=a=new PropertyNode("string"==typeof n?hexToRGB(n):n,r,e.ease);if(2<t.length||2===t.length&&t[1].value!==n)for(let e=1;e<t.length;++e){const{value:i,time:n}=t[e];a.next=new PropertyNode("string"==typeof i?hexToRGB(i):i,n),a=a.next}return o.isStepped=!!e.isStepped,o}const t=new PropertyNode("string"==typeof e.start?hexToRGB(e.start):e.start,0);return e.end!==e.start&&(t.next=new PropertyNode("string"==typeof e.end?hexToRGB(e.end):e.end,1)),t}}let GetTextureFromString=PIXI.Texture.from;const verbose=!1,DEG_TO_RADS=Math.PI/180;function rotatePoint(e,t){if(!e)return;const i=Math.sin(e),a=Math.cos(e),n=t.x*a-t.y*i,r=t.x*i+t.y*a;t.x=n,t.y=r}function combineRGBComponents(e,t,i){return e<<16|t<<8|i}function length(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function normalize(e){const t=1/length(e);e.x*=t,e.y*=t}function scaleBy(e,t){e.x*=t,e.y*=t}function hexToRGB(e,t){t||(t={}),"#"===e.charAt(0)?e=e.substr(1):0===e.indexOf("0x")&&(e=e.substr(2));let i;return 8===e.length&&(i=e.substr(0,2),e=e.substr(2)),t.r=parseInt(e.substr(0,2),16),t.g=parseInt(e.substr(2,2),16),t.b=parseInt(e.substr(4,2),16),i&&(t.a=parseInt(i,16)),t}function generateEase(e){const a=e.length;return function(n){const r=0|a*n,i=(n-r*(1/a))*a,t=e[r]||e[a-1];return t.s+i*(2*(1-i)*(t.cp-t.s)+i*(t.e-t.s))}}function getBlendMode(e){return e?(e=e.toUpperCase().replace(/ /g,"_"),PIXI.BLEND_MODES[e]||PIXI.BLEND_MODES.NORMAL):PIXI.BLEND_MODES.NORMAL}function createSteppedGradient(e,t=10){("number"!=typeof t||0>=t)&&(t=10);const i=new PropertyNode(hexToRGB(e[0].value),e[0].time);i.isStepped=!0;let a=i,n=e[0],r=1,o=e[r];for(let s,d=1;d<t;++d){for(s=d/t;s>o.time;)n=o,o=e[++r];s=(s-n.time)/(o.time-n.time);const i=hexToRGB(n.value),l=hexToRGB(o.value),p={r:(l.r-i.r)*s+i.r,g:(l.g-i.g)*s+i.g,b:(l.b-i.b)*s+i.b};a.next=new PropertyNode(p,d/t),a=a.next}return i}var ParticleUtils={__proto__:null,GetTextureFromString:GetTextureFromString,verbose:!1,DEG_TO_RADS:DEG_TO_RADS,rotatePoint:rotatePoint,combineRGBComponents:combineRGBComponents,length:length,normalize:normalize,scaleBy:scaleBy,hexToRGB:hexToRGB,generateEase:generateEase,getBlendMode:getBlendMode,createSteppedGradient:createSteppedGradient};class Particle extends PIXI.Sprite{constructor(e){super(),this.prevChild=this.nextChild=null,this.emitter=e,this.config={},this.anchor.x=this.anchor.y=.5,this.maxLife=0,this.age=0,this.agePercent=0,this.oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.kill=this.kill}init(e){this.maxLife=e,this.age=this.agePercent=0,this.rotation=0,this.position.x=this.position.y=0,this.scale.x=this.scale.y=1,this.tint=16777215,this.alpha=1,this.oneOverLife=1/this.maxLife,this.visible=!0}kill(){this.emitter.recycle(this)}destroy(){this.parent&&this.parent.removeChild(this),this.emitter=this.next=this.prev=null,super.destroy()}}var BehaviorOrder;(function(e){e[e.Spawn=0]="Spawn",e[e.Normal=2]="Normal",e[e.Late=5]="Late"})(BehaviorOrder||(BehaviorOrder={}));const ticker=PIXI.Ticker.shared,PositionParticle=Symbol("Position particle per emitter position");class Emitter{constructor(e,t){this.initBehaviors=[],this.updateBehaviors=[],this.recycleBehaviors=[],this.minLifetime=0,this.maxLifetime=0,this.customEase=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=new PIXI.Point,this.particlesPerWave=1,this.rotation=0,this.ownerPos=new PIXI.Point,this._prevEmitterPos=new PIXI.Point,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=e,t&&this.init(t),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}static registerBehavior(e){Emitter.knownBehaviors[e.type]=e}get frequency(){return this._frequency}set frequency(e){this._frequency="number"==typeof e&&0<e?e:1}get parent(){return this._parent}set parent(e){this.cleanup(),this._parent=e}init(e){if(e){this.cleanup(),this._origConfig=e,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,this.customEase=e.ease?"function"==typeof e.ease?e.ease:generateEase(e.ease):null,this.particlesPerWave=1,e.particlesPerWave&&1<e.particlesPerWave&&(this.particlesPerWave=e.particlesPerWave),this.frequency=e.frequency,this.spawnChance="number"==typeof e.spawnChance&&0<e.spawnChance?e.spawnChance:1,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=0<e.maxParticles?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos.set(0),e.pos?this.spawnPos.copyFrom(e.pos):this.spawnPos.set(0),this._prevEmitterPos.copyFrom(this.spawnPos),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===e.emit||!!e.emit,this.autoUpdate=!!e.autoUpdate;const t=e.behaviors.map(e=>{const t=Emitter.knownBehaviors[e.type];return t?new t(e.config):(console.error(`Unknown behavior: ${e.type}`),null)}).filter(e=>!!e);t.push(PositionParticle),t.sort((e,t)=>e===PositionParticle?t.order===BehaviorOrder.Spawn?1:-1:t===PositionParticle?e.order===BehaviorOrder.Spawn?-1:1:e.order-t.order),this.initBehaviors=t.slice(),this.updateBehaviors=t.filter(e=>e!==PositionParticle&&e.updateParticle),this.recycleBehaviors=t.filter(e=>e!==PositionParticle&&e.recycleParticle)}}getBehavior(e){return Emitter.knownBehaviors[e]?this.initBehaviors.find(t=>t instanceof Emitter.knownBehaviors[e])||null:null}fillPool(e){for(;0<e;--e){const e=new Particle(this);e.next=this._poolFirst,this._poolFirst=e}}recycle(e,t=!1){for(let a=0;a<this.recycleBehaviors.length;++a)this.recycleBehaviors[a].recycleParticle(e,!t);e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===this._activeParticlesLast&&(this._activeParticlesLast=e.prev),e===this._activeParticlesFirst&&(this._activeParticlesFirst=e.next),e.prev=null,e.next=this._poolFirst,this._poolFirst=e,e.parent&&e.parent.removeChild(e),--this.particleCount}rotate(e){if(this.rotation!==e){const t=e-this.rotation;this.rotation=e,rotatePoint(t,this.spawnPos),this._posChanged=!0}}updateSpawnPos(e,t){this._posChanged=!0,this.spawnPos.x=e,this.spawnPos.y=t}updateOwnerPos(e,t){this._posChanged=!0,this.ownerPos.x=e,this.ownerPos.y=t}resetPositionTracking(){this._prevPosIsValid=!1}get emit(){return this._emit}set emit(e){this._emit=!!e,this._emitterLife=this.emitterLifetime}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){this._autoUpdate&&!e?ticker.remove(this.update,this):!this._autoUpdate&&e&&ticker.add(this.update,this),this._autoUpdate=!!e}playOnceAndDestroy(e){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=e}playOnce(e){this.emit=!0,this._completeCallback=e}update(e){if(this._autoUpdate&&(e=.001*ticker.elapsedMS),!this._parent)return;for(let t,a=this._activeParticlesFirst;a;a=t)if(t=a.next,a.age+=e,a.age>a.maxLife||0>a.age)this.recycle(a);else{let t=a.age*a.oneOverLife;this.customEase&&(4===this.customEase.length?t=this.customEase(t,0,1,1):t=this.customEase(t)),a.agePercent=t;for(let t=0;t<this.updateBehaviors.length;++t)if(this.updateBehaviors[t].updateParticle(a,e)){this.recycle(a);break}}let t,i;this._prevPosIsValid&&(t=this._prevEmitterPos.x,i=this._prevEmitterPos.y);const a=this.ownerPos.x+this.spawnPos.x,n=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=0>e?0:e;0>=this._spawnTimer;){if(0<=this._emitterLife&&(this._emitterLife-=this._frequency,0>=this._emitterLife)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}let r,o;if(this._prevPosIsValid&&this._posChanged){const s=1+this._spawnTimer/e;r=(a-t)*s+t,o=(n-i)*s+i}else r=a,o=n;let s=null,d=null;for(let e=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),t=0;t<e;++t){if(1>this.spawnChance&&Math.random()>=this.spawnChance)continue;let e;if(e=this.minLifetime===this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer>=e)continue;let t;this._poolFirst?(t=this._poolFirst,this._poolFirst=this._poolFirst.next,t.next=null):t=new Particle(this),t.init(e),this.addAtBack?this._parent.addChildAt(t,0):this._parent.addChild(t),s?(d.next=t,t.prev=d,d=t):d=s=t,++this.particleCount}if(s){this._activeParticlesLast?(this._activeParticlesLast.next=s,s.prev=this._activeParticlesLast,this._activeParticlesLast=d):(this._activeParticlesFirst=s,this._activeParticlesLast=d);for(let e=0;e<this.initBehaviors.length;++e){const t=this.initBehaviors[e];if(t===PositionParticle)for(let e,t=s;t;t=e){e=t.next,0!==this.rotation&&(rotatePoint(this.rotation,t.position),t.rotation+=this.rotation),t.position.x+=r,t.position.y+=o,t.age+=-this._spawnTimer;let i=t.age*t.oneOverLife;this.customEase&&(4===this.customEase.length?i=this.customEase(i,0,1,1):i=this.customEase(i)),t.agePercent=i}else t.initParticles(s)}for(let e,t=s;t;t=e){e=t.next;for(let e=0;e<this.updateBehaviors.length;++e)if(this.updateBehaviors[e].updateParticle(t,-this._spawnTimer)){this.recycle(t);break}}}this._spawnTimer+=this._frequency}if(this._posChanged&&(this._prevEmitterPos.x=a,this._prevEmitterPos.y=n,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){const e=this._completeCallback;this._completeCallback=null,e()}this._destroyWhenComplete&&this.destroy()}}emitNow(){const e=this.ownerPos.x+this.spawnPos.x,t=this.ownerPos.y+this.spawnPos.y;let a=null,n=null;for(let e=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),t=0;t<e;++t){if(1>this.spawnChance&&Math.random()>=this.spawnChance)continue;let e;this._poolFirst?(e=this._poolFirst,this._poolFirst=this._poolFirst.next,e.next=null):e=new Particle(this);let t;t=this.minLifetime===this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,e.init(t),this.addAtBack?this._parent.addChildAt(e,0):this._parent.addChild(e),a?(n.next=e,e.prev=n,n=e):n=a=e,++this.particleCount}if(a){this._activeParticlesLast?(this._activeParticlesLast.next=a,a.prev=this._activeParticlesLast,this._activeParticlesLast=n):(this._activeParticlesFirst=a,this._activeParticlesLast=n);for(let n=0;n<this.initBehaviors.length;++n){const i=this.initBehaviors[n];if(i===PositionParticle)for(let i,n=a;n;n=i)i=n.next,0!==this.rotation&&(rotatePoint(this.rotation,n.position),n.rotation+=this.rotation),n.position.x+=e,n.position.y+=t;else i.initParticles(a)}}}cleanup(){let e,t;for(e=this._activeParticlesFirst;e;e=t)t=e.next,this.recycle(e,!0);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0}get destroyed(){return!(this._parent&&this.initBehaviors.length)}destroy(){this.autoUpdate=!1,this.cleanup();let e;for(let t=this._poolFirst;t;t=e)e=t.next,t.destroy();this._poolFirst=this._parent=this.spawnPos=this.ownerPos=this.customEase=this._completeCallback=null,this.initBehaviors.length=this.updateBehaviors.length=this.recycleBehaviors.length=0}}Emitter.knownBehaviors={};class Rectangle{constructor(e){this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h}getRandPos(e){e.x=Math.random()*this.w+this.x,e.y=Math.random()*this.h+this.y}}Rectangle.type="rect",Rectangle.editorConfig=null;class Torus{constructor(e){this.x=e.x||0,this.y=e.y||0,this.radius=e.radius,this.innerRadius=e.innerRadius||0,this.rotation=!!e.affectRotation}getRandPos(e){e.x=this.innerRadius===this.radius?this.radius:Math.random()*(this.radius-this.innerRadius)+this.innerRadius,e.y=0;const t=2*(Math.random()*Math.PI);this.rotation&&(e.rotation+=t),rotatePoint(t,e.position),e.position.x+=this.x,e.position.y+=this.y}}Torus.type="torus",Torus.editorConfig=null;class PolygonalChain{constructor(e){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(e)}init(e){if(!e||!e.length)this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});else if(Array.isArray(e[0]))for(let t=0;t<e.length;++t){const i=e[t];let a=i[0];for(let e=1;e<i.length;++e){const t=i[e];this.segments.push({p1:a,p2:t,l:0}),a=t}}else{let t=e[0];for(let a=1;a<e.length;++a){const i=e[a];this.segments.push({p1:t,p2:i,l:0}),t=i}}for(let t=0;t<this.segments.length;++t){const{p1:e,p2:i}=this.segments[t],a=Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y));this.segments[t].l=a,this.totalLength+=a,this.countingLengths.push(this.totalLength)}}getRandPos(e){const t=Math.random()*this.totalLength;let a,n;if(1===this.segments.length)a=this.segments[0],n=t;else for(let e=0;e<this.countingLengths.length;++e)if(t<this.countingLengths[e]){a=this.segments[e],n=0===e?t:t-this.countingLengths[e-1];break}n/=a.l||1;const{p1:r,p2:i}=a;e.x=r.x+n*(i.x-r.x),e.y=r.y+n*(i.y-r.y)}}PolygonalChain.type="polygonalChain",PolygonalChain.editorConfig=null;var index={__proto__:null,Rectangle:Rectangle,Torus:Torus,PolygonalChain:PolygonalChain},Types={__proto__:null};class AccelerationBehavior{constructor(e){var t;this.order=BehaviorOrder.Late,this.minStart=e.minStart,this.maxStart=e.maxStart,this.accel=e.accel,this.rotate=!!e.rotate,this.maxSpeed=null!==(t=e.maxSpeed)&&void 0!==t?t:0}initParticles(e){for(let t=e;t;){const e=Math.random()*(this.maxStart-this.minStart)+this.minStart;t.config.velocity?t.config.velocity.set(e,0):t.config.velocity=new PIXI.Point(e,0),rotatePoint(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const i=e.config.velocity,a=i.x,n=i.y;if(i.x+=this.accel.x*t,i.y+=this.accel.y*t,this.maxSpeed){const e=length(i);e>this.maxSpeed&&scaleBy(i,this.maxSpeed/e)}e.x+=(a+i.x)/2*t,e.y+=(n+i.y)/2*t,this.rotate&&(e.rotation=Math.atan2(i.y,i.x))}}AccelerationBehavior.type="moveAcceleration",AccelerationBehavior.editorConfig=null;function intValueSimple(e){return this.ease&&(e=this.ease(e)),(this.first.next.value-this.first.value)*e+this.first.value}function intColorSimple(e){this.ease&&(e=this.ease(e));const t=this.first.value,i=this.first.next.value,a=(i.r-t.r)*e+t.r,n=(i.g-t.g)*e+t.g,r=(i.b-t.b)*e+t.b;return combineRGBComponents(a,n,r)}function intValueComplex(e){this.ease&&(e=this.ease(e));let t=this.first,i=t.next;for(;e>i.time;)t=i,i=i.next;return e=(e-t.time)/(i.time-t.time),(i.value-t.value)*e+t.value}function intColorComplex(e){this.ease&&(e=this.ease(e));let t=this.first,i=t.next;for(;e>i.time;)t=i,i=i.next;e=(e-t.time)/(i.time-t.time);const a=t.value,n=i.value,o=(n.r-a.r)*e+a.r,r=(n.g-a.g)*e+a.g,s=(n.b-a.b)*e+a.b;return combineRGBComponents(o,r,s)}function intValueStepped(e){this.ease&&(e=this.ease(e));let t=this.first;for(;t.next&&e>t.next.time;)t=t.next;return t.value}function intColorStepped(e){this.ease&&(e=this.ease(e));let t=this.first;for(;t.next&&e>t.next.time;)t=t.next;const i=t.value;return combineRGBComponents(i.r,i.g,i.b)}class PropertyList{constructor(e=!1){this.first=null,this.isColor=!!e,this.interpolate=null,this.ease=null}reset(e){this.first=e;const t=e.next&&1<=e.next.time;this.interpolate=t?this.isColor?intColorSimple:intValueSimple:e.isStepped?this.isColor?intColorStepped:intValueStepped:this.isColor?intColorComplex:intValueComplex,this.ease=this.first.ease}}class AlphaBehavior{constructor(e){this.order=BehaviorOrder.Normal,this.list=new PropertyList(!1),this.list.reset(PropertyNode.createList(e.alpha))}initParticles(e){for(let t=e;t;)t.alpha=this.list.first.value,t=t.next}updateParticle(e){e.alpha=this.list.interpolate(e.agePercent)}}AlphaBehavior.type="alpha",AlphaBehavior.editorConfig=null;class StaticAlphaBehavior{constructor(e){this.order=BehaviorOrder.Normal,this.value=e.alpha}initParticles(e){for(let t=e;t;)t.alpha=this.value,t=t.next}}StaticAlphaBehavior.type="alphaStatic",StaticAlphaBehavior.editorConfig=null;function getTextures(e){const t=[];for(let i,a=0;a<e.length;++a)if(i=e[a],"string"==typeof i)t.push(GetTextureFromString(i));else if(i instanceof PIXI.Texture)t.push(i);else{let e=i.count||1;for(i="string"==typeof i.texture?GetTextureFromString(i.texture):i.texture;0<e;--e)t.push(i)}return t}class RandomAnimatedTextureBehavior{constructor(e){this.order=BehaviorOrder.Normal,this.anims=[];for(let t=0;t<e.anims.length;++t){const i=e.anims[t],a=getTextures(i.textures),n=0>i.framerate?-1:0<i.framerate?i.framerate:60,r={textures:a,duration:0<n?a.length/n:0,framerate:n,loop:!!(0<n)&&!!i.loop};this.anims.push(r)}}initParticles(e){for(let t=e;t;){const e=Math.floor(Math.random()*this.anims.length),i=t.config.anim=this.anims[e];t.texture=i.textures[0],t.config.animElapsed=0,-1===i.framerate?(t.config.animDuration=t.maxLife,t.config.animFramerate=i.textures.length/t.maxLife):(t.config.animDuration=i.duration,t.config.animFramerate=i.framerate),t=t.next}}updateParticle(e,t){const i=e.config,a=i.anim;i.animElapsed+=t,i.animElapsed>=i.animDuration&&(i.anim.loop?i.animElapsed%=i.animDuration:i.animElapsed=i.animDuration-1e-6);const n=0|i.animElapsed*i.animFramerate+1e-7;e.texture=a.textures[n]||a.textures[a.textures.length-1]||PIXI.Texture.EMPTY}}RandomAnimatedTextureBehavior.type="animatedRandom",RandomAnimatedTextureBehavior.editorConfig=null;class SingleAnimatedTextureBehavior{constructor(e){this.order=BehaviorOrder.Normal;const t=e.anim,i=getTextures(t.textures),a=0>t.framerate?-1:0<t.framerate?t.framerate:60;this.anim={textures:i,duration:0<a?i.length/a:0,framerate:a,loop:!!(0<a)&&!!t.loop}}initParticles(e){let t=e;for(const i=this.anim;t;)t.texture=i.textures[0],t.config.animElapsed=0,-1===i.framerate?(t.config.animDuration=t.maxLife,t.config.animFramerate=i.textures.length/t.maxLife):(t.config.animDuration=i.duration,t.config.animFramerate=i.framerate),t=t.next}updateParticle(e,t){const i=this.anim,a=e.config;a.animElapsed+=t,a.animElapsed>=a.animDuration&&(i.loop?a.animElapsed%=a.animDuration:a.animElapsed=a.animDuration-1e-6);const n=0|a.animElapsed*a.animFramerate+1e-7;e.texture=i.textures[n]||i.textures[i.textures.length-1]||PIXI.Texture.EMPTY}}SingleAnimatedTextureBehavior.type="animatedSingle",SingleAnimatedTextureBehavior.editorConfig=null;class BlendModeBehavior{constructor(e){this.order=BehaviorOrder.Normal,this.value=e.blendMode}initParticles(e){for(let t=e;t;)t.blendMode=getBlendMode(this.value),t=t.next}}BlendModeBehavior.type="blendMode",BlendModeBehavior.editorConfig=null;class BurstSpawnBehavior{constructor(e){this.order=BehaviorOrder.Spawn,this.spacing=e.spacing*DEG_TO_RADS,this.start=e.start*DEG_TO_RADS,this.distance=e.distance}initParticles(e){let t=0,i=e;for(;i;){let e;e=this.spacing?this.start+this.spacing*t:2*(Math.random()*Math.PI),i.rotation=e,this.distance&&(i.position.x=this.distance,rotatePoint(e,i.position)),i=i.next,++t}}}BurstSpawnBehavior.type="spawnBurst",BurstSpawnBehavior.editorConfig=null;class ColorBehavior{constructor(e){this.order=BehaviorOrder.Normal,this.list=new PropertyList(!0),this.list.reset(PropertyNode.createList(e.color))}initParticles(e){let t=e;const i=this.list.first.value,a=combineRGBComponents(i.r,i.g,i.b);for(;t;)t.tint=a,t=t.next}updateParticle(e){e.tint=this.list.interpolate(e.agePercent)}}ColorBehavior.type="color",ColorBehavior.editorConfig=null;class StaticColorBehavior{constructor(e){this.order=BehaviorOrder.Normal;let t=e.color;"#"===t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),this.value=parseInt(t,16)}initParticles(e){for(let t=e;t;)t.tint=this.value,t=t.next}}StaticColorBehavior.type="colorStatic",StaticColorBehavior.editorConfig=null;class OrderedTextureBehavior{constructor(e){this.order=BehaviorOrder.Normal,this.index=0,this.textures=e.textures.map(e=>"string"==typeof e?GetTextureFromString(e):e)}initParticles(e){for(let t=e;t;)t.texture=this.textures[this.index],++this.index>=this.textures.length&&(this.index=0),t=t.next}}OrderedTextureBehavior.type="textureOrdered",OrderedTextureBehavior.editorConfig=null;const helperPoint=new PIXI.Point,MATH_FUNCS=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2","abs","acos","acosh","asin","asinh","atan","atanh","atan2","cbrt","ceil","cos","cosh","exp","expm1","floor","fround","hypot","log","log1p","log10","log2","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh"],WHITELISTER=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(MATH_FUNCS).join("|"),"g");function parsePath(e){const t=e.match(WHITELISTER);for(let a=t.length-1;0<=a;--a)0<=MATH_FUNCS.indexOf(t[a])&&(t[a]=`Math.${t[a]}`);return e=t.join(""),new Function("x",`return ${e};`)}class PathBehavior{constructor(e){var t;if(this.order=BehaviorOrder.Late,!e.path)verbose&&console.error("PathParticle requires a path value in its config!"),this.path=e=>e;else if("function"==typeof e.path)this.path=e.path;else try{this.path=parsePath(e.path)}catch(t){verbose&&console.error("PathParticle: error in parsing path expression",t),this.path=null}this.list=new PropertyList(!1),this.list.reset(PropertyNode.createList(e.speed)),this.minMult=null!==(t=e.minMult)&&void 0!==t?t:1}initParticles(e){for(let t=e;t;){t.config.initRotation=t.rotation,t.config.initPosition?t.config.initPosition.copyFrom(t.position):t.config.initPosition=new PIXI.Point(t.x,t.y),t.config.movement=0;const e=Math.random()*(1-this.minMult)+this.minMult;t.config.speedMult=e,t=t.next}}updateParticle(e,t){const i=this.list.interpolate(e.agePercent)*e.config.speedMult;e.config.movement+=i*t,helperPoint.x=e.config.movement,helperPoint.y=this.path(helperPoint.x),rotatePoint(e.config.initRotation,helperPoint),e.position.x=e.config.initPosition.x+helperPoint.x,e.position.y=e.config.initPosition.y+helperPoint.y}}PathBehavior.type="movePath",PathBehavior.editorConfig=null;class PointSpawnBehavior{constructor(){this.order=BehaviorOrder.Spawn}initParticles(){}}PointSpawnBehavior.type="spawnPoint",PointSpawnBehavior.editorConfig=null;class RandomTextureBehavior{constructor(e){this.order=BehaviorOrder.Normal,this.textures=e.textures.map(e=>"string"==typeof e?GetTextureFromString(e):e)}initParticles(e){for(let t=e;t;){const e=Math.floor(Math.random()*this.textures.length);t.texture=this.textures[e],t=t.next}}}RandomTextureBehavior.type="textureRandom",RandomTextureBehavior.editorConfig=null;class RotationBehavior{constructor(e){this.order=BehaviorOrder.Normal,this.minStart=e.minStart*DEG_TO_RADS,this.maxStart=e.maxStart*DEG_TO_RADS,this.minSpeed=e.minSpeed*DEG_TO_RADS,this.maxSpeed=e.maxSpeed*DEG_TO_RADS,this.accel=e.accel*DEG_TO_RADS}initParticles(e){for(let t=e;t;)t.rotation+=this.minStart===this.maxStart?this.maxStart:Math.random()*(this.maxStart-this.minStart)+this.minStart,t.config.rotSpeed=Math.random()*(this.maxSpeed-this.minSpeed)+this.minSpeed,t=t.next}updateParticle(e,t){if(this.accel){const i=e.config.rotSpeed;e.config.rotSpeed+=this.accel*t,e.rotation+=(e.config.rotSpeed+i)/2*t}else e.rotation+=e.config.rotSpeed*t}}RotationBehavior.type="rotation",RotationBehavior.editorConfig=null;class StaticRotationBehavior{constructor(e){this.order=BehaviorOrder.Normal,this.min=e.min*DEG_TO_RADS,this.max=e.max*DEG_TO_RADS}initParticles(e){for(let t=e;t;)t.rotation+=this.min===this.max?this.max:Math.random()*(this.max-this.min)+this.min,t=t.next}}StaticRotationBehavior.type="rotationStatic",StaticRotationBehavior.editorConfig=null;class NoRotationBehavior{constructor(e){this.order=BehaviorOrder.Late+1,this.rotation=(e.rotation||0)*DEG_TO_RADS}initParticles(e){for(let t=e;t;)t.rotation=this.rotation,t=t.next}}NoRotationBehavior.type="noRotation",NoRotationBehavior.editorConfig=null;class ScaleBehavior{constructor(e){var t;this.order=BehaviorOrder.Normal,this.list=new PropertyList(!1),this.list.reset(PropertyNode.createList(e.scale)),this.minMult=null!==(t=e.minMult)&&void 0!==t?t:1}initParticles(e){for(let t=e;t;){const e=Math.random()*(1-this.minMult)+this.minMult;t.config.scaleMult=e,t.scale.x=t.scale.y=this.list.first.value*e,t=t.next}}updateParticle(e){e.scale.x=e.scale.y=this.list.interpolate(e.agePercent)*e.config.scaleMult}}ScaleBehavior.type="scale",ScaleBehavior.editorConfig=null;class StaticScaleBehavior{constructor(e){this.order=BehaviorOrder.Normal,this.min=e.min,this.max=e.max}initParticles(e){for(let t=e;t;){const e=Math.random()*(this.max-this.min)+this.min;t.scale.x=t.scale.y=e,t=t.next}}}StaticScaleBehavior.type="scaleStatic",StaticScaleBehavior.editorConfig=null;class ShapeSpawnBehavior{constructor(e){this.order=BehaviorOrder.Spawn;const t=ShapeSpawnBehavior.shapes[e.type];if(!t)throw new Error(`No shape found with type '${e.type}'`);this.shape=new t(e.data)}static registerShape(e,t){ShapeSpawnBehavior.shapes[t||e.type]=e}initParticles(e){for(let t=e;t;)this.shape.getRandPos(t),t=t.next}}ShapeSpawnBehavior.type="spawnShape",ShapeSpawnBehavior.editorConfig=null,ShapeSpawnBehavior.shapes={},ShapeSpawnBehavior.registerShape(PolygonalChain),ShapeSpawnBehavior.registerShape(Rectangle),ShapeSpawnBehavior.registerShape(Torus),ShapeSpawnBehavior.registerShape(Torus,"circle");class SingleTextureBehavior{constructor(e){this.order=BehaviorOrder.Normal,this.texture="string"==typeof e.texture?GetTextureFromString(e.texture):e.texture}initParticles(e){for(let t=e;t;)t.texture=this.texture,t=t.next}}SingleTextureBehavior.type="textureSingle",SingleTextureBehavior.editorConfig=null;class SpeedBehavior{constructor(e){var t;this.order=BehaviorOrder.Late,this.list=new PropertyList(!1),this.list.reset(PropertyNode.createList(e.speed)),this.minMult=null!==(t=e.minMult)&&void 0!==t?t:1}initParticles(e){for(let t=e;t;){const e=Math.random()*(1-this.minMult)+this.minMult;t.config.speedMult=e,t.config.velocity?t.config.velocity.set(this.list.first.value*e,0):t.config.velocity=new PIXI.Point(this.list.first.value*e,0),rotatePoint(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const i=this.list.interpolate(e.agePercent)*e.config.speedMult,a=e.config.velocity;normalize(a),scaleBy(a,i),e.x+=a.x*t,e.y+=a.y*t}}SpeedBehavior.type="moveSpeed",SpeedBehavior.editorConfig=null;class StaticSpeedBehavior{constructor(e){this.order=BehaviorOrder.Late,this.min=e.min,this.max=e.max}initParticles(e){for(let t=e;t;){const e=Math.random()*(this.max-this.min)+this.min;t.config.velocity?t.config.velocity.set(e,0):t.config.velocity=new PIXI.Point(e,0),rotatePoint(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const i=e.config.velocity;e.x+=i.x*t,e.y+=i.y*t}}StaticSpeedBehavior.type="moveSpeedStatic",StaticSpeedBehavior.editorConfig=null;var index$1={__proto__:null,spawnShapes:index,editor:Types,get BehaviorOrder(){return BehaviorOrder},AccelerationBehavior:AccelerationBehavior,AlphaBehavior:AlphaBehavior,StaticAlphaBehavior:StaticAlphaBehavior,RandomAnimatedTextureBehavior:RandomAnimatedTextureBehavior,SingleAnimatedTextureBehavior:SingleAnimatedTextureBehavior,BlendModeBehavior:BlendModeBehavior,BurstSpawnBehavior:BurstSpawnBehavior,ColorBehavior:ColorBehavior,StaticColorBehavior:StaticColorBehavior,OrderedTextureBehavior:OrderedTextureBehavior,PathBehavior:PathBehavior,PointSpawnBehavior:PointSpawnBehavior,RandomTextureBehavior:RandomTextureBehavior,RotationBehavior:RotationBehavior,StaticRotationBehavior:StaticRotationBehavior,NoRotationBehavior:NoRotationBehavior,ScaleBehavior:ScaleBehavior,StaticScaleBehavior:StaticScaleBehavior,ShapeSpawnBehavior:ShapeSpawnBehavior,SingleTextureBehavior:SingleTextureBehavior,SpeedBehavior:SpeedBehavior,StaticSpeedBehavior:StaticSpeedBehavior};function upgradeConfig(e,t){var i,a,n,r,o,s,d,l,p,h,m,c,u,f,x,v,g,C,_,y,P;if("behaviors"in e)return e;const S={lifetime:e.lifetime,ease:e.ease,particlesPerWave:e.particlesPerWave,frequency:e.frequency,spawnChance:e.spawnChance,emitterLifetime:e.emitterLifetime,maxParticles:e.maxParticles,addAtBack:e.addAtBack,pos:e.pos,emit:e.emit,autoUpdate:e.autoUpdate,behaviors:[]};if(e.alpha)if(!("start"in e.alpha))1===e.alpha.list.length?1!==e.alpha.list[0].value&&S.behaviors.push({type:"alphaStatic",config:{alpha:e.alpha.list[0].value}}):S.behaviors.push({type:"alpha",config:{alpha:e.alpha}});else if(e.alpha.start===e.alpha.end)1!==e.alpha.start&&S.behaviors.push({type:"alphaStatic",config:{alpha:e.alpha.start}});else{const t={list:[{time:0,value:e.alpha.start},{time:1,value:e.alpha.end}]};S.behaviors.push({type:"alpha",config:{alpha:t}})}if(e.acceleration&&(e.acceleration.x||e.acceleration.y)){let t,n;"start"in e.speed?(t=e.speed.start*(null!==(i=e.speed.minimumSpeedMultiplier)&&void 0!==i?i:1),n=e.speed.start):(t=e.speed.list[0].value*(null!==(a=e.minimumSpeedMultiplier)&&void 0!==a?a:1),n=e.speed.list[0].value),S.behaviors.push({type:"moveAcceleration",config:{accel:e.acceleration,minStart:t,maxStart:n,rotate:!e.noRotation,maxSpeed:e.maxSpeed}})}else if(null===(n=e.extraData)||void 0===n?void 0:n.path){let t,i;"start"in e.speed?(i=null!==(r=e.speed.minimumSpeedMultiplier)&&void 0!==r?r:1,t=e.speed.start===e.speed.end?{list:[{time:0,value:e.speed.start}]}:{list:[{time:0,value:e.speed.start},{time:1,value:e.speed.end}]}):(t=e.speed,i=null!==(o=e.minimumSpeedMultiplier)&&void 0!==o?o:1),S.behaviors.push({type:"movePath",config:{path:e.extraData.path,speed:t,minMult:i}})}else if(e.speed)if(!("start"in e.speed))1===e.speed.list.length?S.behaviors.push({type:"moveSpeedStatic",config:{min:e.speed.list[0].value*(null!==(d=e.minimumSpeedMultiplier)&&void 0!==d?d:1),max:e.speed.list[0].value}}):S.behaviors.push({type:"moveSpeed",config:{speed:e.speed,minMult:null!==(l=e.minimumSpeedMultiplier)&&void 0!==l?l:1}});else if(e.speed.start===e.speed.end)S.behaviors.push({type:"moveSpeedStatic",config:{min:e.speed.start*(null!==(s=e.speed.minimumSpeedMultiplier)&&void 0!==s?s:1),max:e.speed.start}});else{const t={list:[{time:0,value:e.speed.start},{time:1,value:e.speed.end}]};S.behaviors.push({type:"moveSpeed",config:{speed:t,minMult:e.speed.minimumSpeedMultiplier}})}if(e.scale)if("start"in e.scale){const t=null!==(p=e.scale.minimumScaleMultiplier)&&void 0!==p?p:1;if(e.scale.start===e.scale.end)S.behaviors.push({type:"scaleStatic",config:{min:e.scale.start*t,max:e.scale.start}});else{const i={list:[{time:0,value:e.scale.start},{time:1,value:e.scale.end}]};S.behaviors.push({type:"scale",config:{scale:i,minMult:t}})}}else if(1===e.scale.list.length){const t=null!==(h=e.minimumScaleMultiplier)&&void 0!==h?h:1,i=e.scale.list[0].value;S.behaviors.push({type:"scaleStatic",config:{min:i*t,max:i}})}else S.behaviors.push({type:"scale",config:{scale:e.scale,minMult:null!==(m=e.minimumScaleMultiplier)&&void 0!==m?m:1}});if(e.color)if(!("start"in e.color))1===e.color.list.length?"ffffff"!==e.color.list[0].value&&S.behaviors.push({type:"colorStatic",config:{color:e.color.list[0].value}}):S.behaviors.push({type:"color",config:{color:e.color}});else if(e.color.start===e.color.end)"ffffff"!==e.color.start&&S.behaviors.push({type:"colorStatic",config:{color:e.color.start}});else{const t={list:[{time:0,value:e.color.start},{time:1,value:e.color.end}]};S.behaviors.push({type:"color",config:{color:t}})}if(e.rotationAcceleration||(null===(c=e.rotationSpeed)||void 0===c?void 0:c.min)||(null===(u=e.rotationSpeed)||void 0===u?void 0:u.max)?S.behaviors.push({type:"rotation",config:{accel:e.rotationAcceleration||0,minSpeed:(null===(f=e.rotationSpeed)||void 0===f?void 0:f.min)||0,maxSpeed:(null===(x=e.rotationSpeed)||void 0===x?void 0:x.max)||0,minStart:(null===(v=e.startRotation)||void 0===v?void 0:v.min)||0,maxStart:(null===(g=e.startRotation)||void 0===g?void 0:g.max)||0}}):((null===(C=e.startRotation)||void 0===C?void 0:C.min)||(null===(_=e.startRotation)||void 0===_?void 0:_.max))&&S.behaviors.push({type:"rotationStatic",config:{min:(null===(y=e.startRotation)||void 0===y?void 0:y.min)||0,max:(null===(P=e.startRotation)||void 0===P?void 0:P.max)||0}}),e.noRotation&&S.behaviors.push({type:"noRotation",config:{}}),e.blendMode&&"normal"!==e.blendMode&&S.behaviors.push({type:"blendMode",config:{blendMode:e.blendMode}}),Array.isArray(t)&&"string"!=typeof t[0]&&"framerate"in t[0]){for(let e=0;e<t.length;++e)"matchLife"===t[e].framerate&&(t[e].framerate=-1);S.behaviors.push({type:"animatedRandom",config:{anims:t}})}else"string"!=typeof t&&"framerate"in t?("matchLife"===t.framerate&&(t.framerate=-1),S.behaviors.push({type:"animatedSingle",config:{anim:t}})):e.orderedArt&&Array.isArray(t)?S.behaviors.push({type:"textureOrdered",config:{textures:t}}):Array.isArray(t)?S.behaviors.push({type:"textureRandom",config:{textures:t}}):S.behaviors.push({type:"textureSingle",config:{texture:t}});if("burst"===e.spawnType)S.behaviors.push({type:"spawnBurst",config:{start:e.angleStart||0,spacing:e.particleSpacing,distance:0}});else if("point"===e.spawnType)S.behaviors.push({type:"spawnPoint",config:{}});else{let t;"ring"===e.spawnType?t={type:"torus",data:{x:e.spawnCircle.x,y:e.spawnCircle.y,radius:e.spawnCircle.r,innerRadius:e.spawnCircle.minR,affectRotation:!0}}:"circle"===e.spawnType?t={type:"torus",data:{x:e.spawnCircle.x,y:e.spawnCircle.y,radius:e.spawnCircle.r,innerRadius:0,affectRotation:!1}}:"rect"===e.spawnType?t={type:"rect",data:e.spawnRect}:"polygonalChain"===e.spawnType&&(t={type:"polygonalChain",data:e.spawnPolygon}),t&&S.behaviors.push({type:"spawnShape",config:t})}return S}class LinkedListContainer extends PIXI.Container{constructor(){super(...arguments),this._firstChild=null,this._lastChild=null,this._childCount=0}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get childCount(){return this._childCount}addChild(...e){if(1<e.length)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this._lastChild?(this._lastChild.nextChild=t,t.prevChild=this._lastChild,this._lastChild=t):this._firstChild=this._lastChild=t,++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",t,this,this._childCount),t.emit("added",this)}return e[0]}addChildAt(e,t){if(0>t||t>this._childCount)throw new Error(`addChildAt: The index ${t} supplied is out of bounds ${this._childCount}`);e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1;const a=e;if(!this._firstChild)this._firstChild=this._lastChild=a;else if(0===t)this._firstChild.prevChild=a,a.nextChild=this._firstChild,this._firstChild=a;else if(t===this._childCount)this._lastChild.nextChild=a,a.prevChild=this._lastChild,this._lastChild=a;else{let e=0,i=this._firstChild;for(;e<t;)i=i.nextChild,++e;i.prevChild.nextChild=a,a.prevChild=i.prevChild,a.nextChild=i,i.prevChild=a}return++this._childCount,this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}addChildBelow(e,t){if(t.parent!==this)throw new Error(`addChildBelow: The relative target must be a child of this parent`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,t.prevChild.nextChild=e,e.prevChild=t.prevChild,e.nextChild=t,t.prevChild=e,this._firstChild===t&&(this._firstChild=e),++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",e,this,this._childCount),e.emit("added",this),e}addChildAbove(e,t){if(t.parent!==this)throw new Error(`addChildBelow: The relative target must be a child of this parent`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,t.nextChild.prevChild=e,e.nextChild=t.nextChild,e.prevChild=t,t.nextChild=e,this._lastChild===t&&(this._lastChild=e),++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",e,this,this._childCount),e.emit("added",this),e}swapChildren(e,t){if(e!==t&&e.parent===this&&t.parent===this){const{prevChild:i,nextChild:a}=e;e.prevChild=t.prevChild,e.nextChild=t.nextChild,t.prevChild=i,t.nextChild=a,this._firstChild===e?this._firstChild=t:this._firstChild===t&&(this._firstChild=e),this._lastChild===e?this._lastChild=t:this._lastChild===t&&(this._lastChild=e),this.onChildrenChange()}}getChildIndex(e){let t=0,i=this._firstChild;for(;i&&!(i===e);)i=i.nextChild,++t;if(!i)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(0>t||t>=this._childCount)throw new Error(`The index ${t} supplied is out of bounds ${this._childCount}`);if(e.parent!==this)throw new Error("The supplied DisplayObject must be a child of the caller");if(e.nextChild&&(e.nextChild.prevChild=e.prevChild),e.prevChild&&(e.prevChild.nextChild=e.nextChild),this._firstChild===e&&(this._firstChild=e.nextChild),this._lastChild===e&&(this._lastChild=e.prevChild),e.nextChild=null,e.prevChild=null,!this._firstChild)this._firstChild=this._lastChild=e;else if(0===t)this._firstChild.prevChild=e,e.nextChild=this._firstChild,this._firstChild=e;else if(t===this._childCount)this._lastChild.nextChild=e,e.prevChild=this._lastChild,this._lastChild=e;else{let a=0,i=this._firstChild;for(;a<t;)i=i.nextChild,++a;i.prevChild.nextChild=e,e.prevChild=i.prevChild,e.nextChild=i,i.prevChild=e}this.onChildrenChange(t)}removeChild(...e){if(1<e.length)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0];if(t.parent!==this)return null;t.parent=null,t.transform._parentID=-1,t.nextChild&&(t.nextChild.prevChild=t.prevChild),t.prevChild&&(t.prevChild.nextChild=t.nextChild),this._firstChild===t&&(this._firstChild=t.nextChild),this._lastChild===t&&(this._lastChild=t.prevChild),t.nextChild=null,t.prevChild=null,--this._childCount,this._boundsID++,this.onChildrenChange(),t.emit("removed",this),this.emit("childRemoved",t,this)}return e[0]}getChildAt(e){if(0>e||e>=this._childCount)throw new Error(`getChildAt: Index (${e}) does not exist.`);if(0===e)return this._firstChild;if(e===this._childCount)return this._lastChild;let t=0,a=this._firstChild;for(;t<e;)a=a.nextChild,++t;return a}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,t.nextChild&&(t.nextChild.prevChild=t.prevChild),t.prevChild&&(t.prevChild.nextChild=t.nextChild),this._firstChild===t&&(this._firstChild=t.nextChild),this._lastChild===t&&(this._lastChild=t.prevChild),t.nextChild=null,t.prevChild=null,--this._childCount,this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this._childCount){const a=e;0===t&&0<this._childCount&&(t=this._childCount);const n=t,r=n-a;if(0<r&&r<=n){const t=[];let r=this._firstChild;for(let e=0;e<=n&&r;++e,r=r.nextChild)e>=a&&t.push(r);const o=t[0].prevChild,s=t[t.length-1].nextChild;s?s.prevChild=o:this._lastChild=o,o?o.nextChild=s:this._firstChild=s;for(let e=0;e<t.length;++e)t[e].parent=null,t[e].transform&&(t[e].transform._parentID=-1),t[e].nextChild=null,t[e].prevChild=null;this._boundsID++,this.onChildrenChange(e);for(let e=0;e<t.length;++e)t[e].emit("removed",this),this.emit("childRemoved",t[e],this,e);return t}if(0===r&&0===this._childCount)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;let e,t;for(e=this._firstChild;e;e=t)t=e.nextChild,e.visible&&e.updateTransform()}calculateBounds(){this._bounds.clear(),this._calculateBounds();let e,t;for(e=this._firstChild;e;e=t)if(t=e.nextChild,e.visible&&e.renderable)if(e.calculateBounds(),e._mask){const t=e._mask.maskObject||e._mask;t.calculateBounds(),this._bounds.addBoundsMask(e._bounds,t._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds);this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=PIXI.DisplayObject.prototype.getLocalBounds.call(this,e);if(!t){let e,t;for(e=this._firstChild;e;e=t)t=e.nextChild,e.visible&&e.updateTransform()}return i}render(e){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);let t,i;for(t=this._firstChild;t;t=i)i=t.nextChild,t.render(e)}}renderAdvanced(e){e.batch.flush();const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let e=0;e<t.length;e++)t[e].enabled&&this._enabledFilters.push(t[e]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}i&&e.mask.push(this,this._mask),this._render(e);let a,n;for(a=this._firstChild;a;a=n)n=a.nextChild,a.render(e);e.batch.flush(),i&&e.mask.pop(this),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()}renderCanvas(e){if(!this.visible||0>=this.worldAlpha||!this.renderable)return;this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);let t,i;for(t=this._firstChild;t;t=i)i=t.nextChild,t.renderCanvas(e);this._mask&&e.maskManager.popMask(e)}}Emitter.registerBehavior(AccelerationBehavior),Emitter.registerBehavior(AlphaBehavior),Emitter.registerBehavior(StaticAlphaBehavior),Emitter.registerBehavior(RandomAnimatedTextureBehavior),Emitter.registerBehavior(SingleAnimatedTextureBehavior),Emitter.registerBehavior(BlendModeBehavior),Emitter.registerBehavior(BurstSpawnBehavior),Emitter.registerBehavior(ColorBehavior),Emitter.registerBehavior(StaticColorBehavior),Emitter.registerBehavior(OrderedTextureBehavior),Emitter.registerBehavior(PathBehavior),Emitter.registerBehavior(PointSpawnBehavior),Emitter.registerBehavior(RandomTextureBehavior),Emitter.registerBehavior(RotationBehavior),Emitter.registerBehavior(StaticRotationBehavior),Emitter.registerBehavior(NoRotationBehavior),Emitter.registerBehavior(ScaleBehavior),Emitter.registerBehavior(StaticScaleBehavior),Emitter.registerBehavior(ShapeSpawnBehavior),Emitter.registerBehavior(SingleTextureBehavior),Emitter.registerBehavior(SpeedBehavior),Emitter.registerBehavior(StaticSpeedBehavior);export{Emitter,LinkedListContainer,Particle,PropertyList,PropertyNode,upgradeConfig,ParticleUtils,index$1 as behaviors};