var gsap,_win,_splitColor,_coreInitted,_PIXI,PropTween,_getSetter,_isV4,i,p,_windowExists=function(){return"undefined"!=typeof window},_getGSAP=function(){return gsap||_windowExists()&&(gsap=window.gsap)&&gsap.registerPlugin&&gsap},_isFunction=function(a){return"function"==typeof a},_warn=function(a){return console.warn(a)},_idMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],_lumR=.212671,_lumG=.71516,_lumB=.072169,_applyMatrix=function(a,b){var c,d,e=[],f=0,g=0;for(c=0;4>c;c++){for(d=0;5>d;d++)g=4===d?a[f+4]:0,e[f+d]=a[f]*b[d]+a[f+1]*b[d+5]+a[f+2]*b[d+10]+a[f+3]*b[d+15]+g;f+=5}return e},_setSaturation=function(a,c){var d=1-c,e=d*_lumR,f=d*_lumG,g=d*_lumB;return _applyMatrix([e+c,f,g,0,0,e,f+c,g,0,0,e,f,g+c,0,0,0,0,0,1,0],a)},_colorize=function(a,d,e){var f=_splitColor(d),c=f[0]/255,h=f[1]/255,g=f[2]/255,b=1-e;return _applyMatrix([b+e*c*_lumR,e*c*_lumG,e*c*_lumB,0,0,e*h*_lumR,b+e*h*_lumG,e*h*_lumB,0,0,e*g*_lumR,e*g*_lumG,b+e*g*_lumB,0,0,0,0,0,1,0],a)},_setHue=function(a,b){b*=Math.PI/180;var d=Math.cos(b),c=Math.sin(b);return _applyMatrix([_lumR+d*(1-_lumR)+c*-_lumR,_lumG+d*-_lumG+c*-_lumG,_lumB+d*-_lumB+c*(1-_lumB),0,0,_lumR+d*-_lumR+.143*c,_lumG+d*(1-_lumG)+.14*c,_lumB+d*-_lumB+-.283*c,0,0,_lumR+d*-_lumR+c*-(1-_lumR),_lumG+d*-_lumG+c*_lumG,_lumB+d*(1-_lumB)+c*_lumB,0,0,0,0,0,1,0,0,0,0,0,1],a)},_setContrast=function(a,b){return _applyMatrix([b,0,0,0,.5*(1-b),0,b,0,0,.5*(1-b),0,0,b,0,.5*(1-b),0,0,0,1,0],a)},_getFilter=function(a,b){var c,d=_PIXI[b],e=a.filters||[],f=e.length;for(d||_warn(b+" not found. PixiPlugin.registerPIXI(PIXI)");-1<--f;)if(e[f]instanceof d)return e[f];return c=new d,"BlurFilter"===b&&(c.blur=0),e.push(c),a.filters=e,c},_addColorMatrixFilterCacheTween=function(a,b,c,d){b.add(c,a,c[a],d[a]),b._props.push(a)},_applyBrightnessToMatrix=function(a,b){var c=new _PIXI.ColorMatrixFilter;return c.matrix=b,c.brightness(a,!0),c.matrix},_copy=function(a){var b,c={};for(b in a)c[b]=a[b];return c},_CMFdefaults={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},_parseColorMatrixFilter=function(a,b,c){var d,e,f,g=_getFilter(a,"ColorMatrixFilter"),h=a._gsColorMatrixFilter=a._gsColorMatrixFilter||_copy(_CMFdefaults),j=b.combineCMF&&(!("colorMatrixFilter"in b)||b.colorMatrixFilter);for(f=g.matrix,b.resolution&&(g.resolution=b.resolution),b.matrix&&b.matrix.length===f.length?(e=b.matrix,1!==h.contrast&&_addColorMatrixFilterCacheTween("contrast",c,h,_CMFdefaults),h.hue&&_addColorMatrixFilterCacheTween("hue",c,h,_CMFdefaults),1!==h.brightness&&_addColorMatrixFilterCacheTween("brightness",c,h,_CMFdefaults),h.colorizeAmount&&(_addColorMatrixFilterCacheTween("colorize",c,h,_CMFdefaults),_addColorMatrixFilterCacheTween("colorizeAmount",c,h,_CMFdefaults)),1!==h.saturation&&_addColorMatrixFilterCacheTween("saturation",c,h,_CMFdefaults)):(e=_idMatrix.slice(),null==b.contrast?1!==h.contrast&&(j?e=_setContrast(e,h.contrast):_addColorMatrixFilterCacheTween("contrast",c,h,_CMFdefaults)):(e=_setContrast(e,+b.contrast),_addColorMatrixFilterCacheTween("contrast",c,h,b)),null==b.hue?h.hue&&(j?e=_setHue(e,h.hue):_addColorMatrixFilterCacheTween("hue",c,h,_CMFdefaults)):(e=_setHue(e,+b.hue),_addColorMatrixFilterCacheTween("hue",c,h,b)),null==b.brightness?1!==h.brightness&&(j?e=_applyBrightnessToMatrix(h.brightness,e):_addColorMatrixFilterCacheTween("brightness",c,h,_CMFdefaults)):(e=_applyBrightnessToMatrix(+b.brightness,e),_addColorMatrixFilterCacheTween("brightness",c,h,b)),null==b.colorize?h.colorizeAmount&&(j?e=_colorize(e,h.colorize,h.colorizeAmount):(_addColorMatrixFilterCacheTween("colorize",c,h,_CMFdefaults),_addColorMatrixFilterCacheTween("colorizeAmount",c,h,_CMFdefaults))):(b.colorizeAmount=("colorizeAmount"in b)?+b.colorizeAmount:1,e=_colorize(e,b.colorize,b.colorizeAmount),_addColorMatrixFilterCacheTween("colorize",c,h,b),_addColorMatrixFilterCacheTween("colorizeAmount",c,h,b)),null==b.saturation?1!==h.saturation&&(j?e=_setSaturation(e,h.saturation):_addColorMatrixFilterCacheTween("saturation",c,h,_CMFdefaults)):(e=_setSaturation(e,+b.saturation),_addColorMatrixFilterCacheTween("saturation",c,h,b))),d=e.length;-1<--d;)e[d]!==f[d]&&c.add(f,d,f[d],e[d],"colorMatrixFilter");c._props.push("colorMatrixFilter")},_renderColor=function(a,b){var c=b.t,d=b.p,e=b.color,f=b.set;f(c,d,e[0]<<16|e[1]<<8|e[2])},_renderDirtyCache=function(a,b){var c=b.g;c&&(c.dirty++,c.clearDirty++)},_renderAutoAlpha=function(a,b){b.t.visible=!!b.t.alpha},_addColorTween=function(a,b,c,d){var e=a[b],f=_splitColor(_isFunction(e)?a[b.indexOf("set")||!_isFunction(a["get"+b.substr(3)])?b:"get"+b.substr(3)]():e),g=_splitColor(c);d._pt=new PropTween(d._pt,a,b,0,0,_renderColor,{t:a,p:b,color:f,set:_getSetter(a,b)}),d.add(f,0,f[0],g[0]),d.add(f,1,f[1],g[1]),d.add(f,2,f[2],g[2])},_colorProps={tint:1,lineColor:1,fillColor:1},_xyContexts=["position","scale","skew","pivot","anchor","tilePosition","tileScale"],_contexts={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},_colorMatrixFilterProps={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},_DEG2RAD=Math.PI/180,_isString=function(a){return"string"==typeof a},_degreesToRadians=function(a){return _isString(a)&&"="===a.charAt(1)?a.substr(0,2)+parseFloat(a.substr(2))*_DEG2RAD:a*_DEG2RAD},_renderPropWithEnd=function(a,b){return b.set(b.t,b.p,1===a?b.e:Math.round(1e5*(b.s+b.c*a))/1e5,b)},_addRotationalPropTween=function(a,b,c,d,e,f){var g,h,i=360*(f?_DEG2RAD:1),j=_isString(e),k=j&&"="===e.charAt(1)?+(e.charAt(0)+"1"):0,l=parseFloat(k?e.substr(2):e)*(f?_DEG2RAD:1),m=k?l*k:l-d,n=d+m;return j&&(g=e.split("_")[1],"short"===g&&(m%=i,m!==m%(i/2)&&(m+=0>m?i:-i)),"cw"===g&&0>m?m=(m+1e10*i)%i-~~(m/i)*i:"ccw"===g&&0<m&&(m=(m-1e10*i)%i-~~(m/i)*i)),a._pt=h=new PropTween(a._pt,b,c,d,m,_renderPropWithEnd),h.e=n,h},_initCore=function(){_windowExists()&&(_win=window,gsap=_getGSAP(),_PIXI=_coreInitted=_PIXI||_win.PIXI,_isV4=_PIXI&&_PIXI.VERSION&&"4"===_PIXI.VERSION.charAt(0),_splitColor=function(a){return gsap.utils.splitColor("0x"===(a+"").substr(0,2)?"#"+a.substr(2):a)})};for(i=0;i<_xyContexts.length;i++)p=_xyContexts[i],_contexts[p+"X"]=p,_contexts[p+"Y"]=p;export var PixiPlugin={version:"3.11.5",name:"pixi",register:function(a,b,c){gsap=a,PropTween=c,_getSetter=b.getSetter,_initCore()},registerPIXI:function(a){_PIXI=a},init:function(a,b){if(_PIXI||_initCore(),!_PIXI||!(a instanceof _PIXI.DisplayObject))return console.warn(a,"is not a DisplayObject or PIXI was not found. PixiPlugin.registerPIXI(PIXI);"),!1;var c,d,e,f,g,h,j,k,l;for(h in b){if(c=_contexts[h],e=b[h],c)d=~h.charAt(h.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(a[c],d,a[c][d],"skew"===c?_degreesToRadians(e):e,0,0,0,0,0,1);else if("scale"===h||"anchor"===h||"pivot"===h||"tileScale"===h)this.add(a[h],"x",a[h].x,e),this.add(a[h],"y",a[h].y,e);else if("rotation"===h||"angle"===h)_addRotationalPropTween(this,a,h,a[h],e,"rotation"===h);else if(_colorMatrixFilterProps[h])f||(_parseColorMatrixFilter(a,b.colorMatrixFilter||b,this),f=!0);else if("blur"===h||"blurX"===h||"blurY"===h||"blurPadding"===h){if(g=_getFilter(a,"BlurFilter"),this.add(g,h,g[h],e),0!==b.blurPadding)for(j=b.blurPadding||2*Math.max(g[h],e),k=a.filters.length;-1<--k;)a.filters[k].padding=Math.max(a.filters[k].padding,j);}else if(!_colorProps[h])"autoAlpha"===h?(this._pt=new PropTween(this._pt,a,"visible",0,0,_renderAutoAlpha),this.add(a,"alpha",a.alpha,e),this._props.push("alpha","visible")):"resolution"!==h&&this.add(a,h,"get",e);else if(("lineColor"===h||"fillColor"===h)&&a instanceof _PIXI.Graphics)for(l=(a.geometry||a).graphicsData,this._pt=new PropTween(this._pt,a,h,0,0,_renderDirtyCache,{g:a.geometry||a}),k=l.length;-1<--k;)_addColorTween(_isV4?l[k]:l[k][h.substr(0,4)+"Style"],_isV4?h:"color",e,this);else _addColorTween(a,h,e,this);this._props.push(h)}}};_getGSAP()&&gsap.registerPlugin(PixiPlugin);export{PixiPlugin as default};